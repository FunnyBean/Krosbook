{"version":3,"sources":["app/components/home/profile/avatar/avatar.component.ts"],"names":[],"mappings":"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","file":"app/components/home/profile/avatar/avatar.component.js","sourcesContent":["import {Component,Directive, forwardRef, OnInit} from '@angular/core';\r\nimport {User} from \"../../../../models/user.admin.model\";\r\nimport {UserService} from \"../../../../services/user.service\"\r\nimport {NG_VALIDATORS, FormControl} from '@angular/forms';\r\n\r\ndeclare var $:any;\r\n\r\n@Component({\r\n  selector: 'avatar',\r\n  templateUrl: 'app/components/home/profile/avatar/avatar.component.html',\r\n  styles: ['.avatarImg{width: 150px; height: auto; display: block; margin: 0 auto;margin-bottom: 15px; margin-top: 15px}'],\r\n})\r\n\r\nexport class AvatarComponent implements OnInit{\r\n  public userData:User = new User();\r\n  public newImage:string = '';\r\n  public progress:number = 0;\r\n  public error;\r\n\r\n  private saving:boolean = false;\r\n\r\n  constructor(private userService:UserService) { }\r\n\r\n  ngOnInit(){\r\n    this.userService.myProfile().subscribe(\r\n      data => {\r\n        this.userData = data.json();\r\n      },\r\n      error => console.log(error)\r\n    );\r\n  }\r\n\r\n  onChange(event){\r\n    var fileToLoad = event.srcElement.files[0];\r\n    if(fileToLoad){\r\n      if(fileToLoad.size > 1048576){\r\n        this.error = \"Zvolený obrázok musí byť menší alebo rovný 1MB. Zvoľte obrázok, ktorý túto podmienku spĺňa.\";\r\n        return false;\r\n      }\r\n      var fileReader = new FileReader();\r\n      var thisDocument = this;\r\n      fileReader.onload = function(file) {\r\n          thisDocument.newImage = fileReader.result;\r\n          $(\"#result\").attr(\"src\", thisDocument.newImage);\r\n          thisDocument.newImage = thisDocument.newImage.split(',')[1];\r\n      }\r\n      fileReader.onloadstart = function() { thisDocument.progress = 1; }\r\n      fileReader.onloadend = function() { thisDocument.progress = 0; }\r\n      fileReader.readAsDataURL(fileToLoad);\r\n    }\r\n    \r\n  }\r\n\r\n  editAvatar(){\r\n    this.error = \"\";\r\n    this.saving = true;\r\n    this.userService.updateImage(this.newImage).subscribe(\r\n      data => { \r\n        $(\"#profilePicture\").attr(\"src\", 'data:image/png;base64,'+this.newImage);\r\n        $(\"#result\").removeAttr(\"src\");    \r\n        $(\"#avatarImg\").attr(\"src\",\"data:image/jpeg;base64,\"+this.newImage);\r\n        this.saving = false;\r\n     },\r\n      error => {this.error = \"Pri ukladaní nastala chyba.\"; this.saving = false;}\r\n    );\r\n\r\n    \r\n  }\r\n\r\n  dismiss(){\r\n    this.error = \"\";\r\n  }\r\n}\r\n\r\n\r\n\r\n"],"sourceRoot":"/source/"}