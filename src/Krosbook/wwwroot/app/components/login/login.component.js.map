{"version":3,"sources":["app/components/login/login.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAAwB,eAAe,CAAC,CAAA;AACxC,uBAAwC,iBAAiB,CAAC,CAAA;AAC1D,6BAA0B,6BAA6B,CAAC,CAAA;AACxD,4BAAqB,yBAAyB,CAAC,CAAA;AAC/C,IAAY,MAAM,WAAM,QAAQ,CAAC,CAAA;AAQjC;IASI,wBAAoB,MAAc,EAAU,WAAwB;QATxE,iBAwCC;QA/BuB,WAAM,GAAN,MAAM,CAAQ;QAAU,gBAAW,GAAX,WAAW,CAAa;QAL5D,SAAI,GAAG,MAAM,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC/B,mBAAc,GAAY,KAAK,CAAC;QAEjC,WAAM,GAAY,KAAK,CAAC;QAG3B,EAAE,CAAC,CAAC,oBAAM,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,WAAW,GAAG,oBAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACtD,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CACtE,UAAA,QAAQ;gBACJ,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACpB,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YAChC,CAAC,EACD,UAAA,KAAK;gBACD,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACpB,oBAAM,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;gBAC5B,KAAI,CAAC,KAAK,GAAG,4CAA4C,CAAC;YAC9D,CAAC,CACJ,CAAC;QACN,CAAC;IACL,CAAC;IAED,iCAAQ,GAAR;QAAA,iBAYC;QAXG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAC5E,UAAA,QAAQ;YACJ,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAChC,CAAC,EACD,UAAA,KAAK;YACD,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,KAAI,CAAC,KAAK,GAAG,uBAAuB,CAAC;QACzC,CAAC,CACJ,CAAC;IACN,CAAC;IA7CL;QAAC,gBAAS,CAAC;YACP,QAAQ,EAAE,OAAO;YACjB,WAAW,EAAE,2CAA2C;YACxD,SAAS,EAAE,CAAC,0CAA0C,CAAC;YACvD,UAAU,EAAE,CAAC,0BAAiB,CAAC;SAClC,CAAC;;sBAAA;IAyCF,qBAAC;AAAD,CAxCA,AAwCC,IAAA;AAxCY,sBAAc,iBAwC1B,CAAA","file":"app/components/login/login.component.js","sourcesContent":["import {Component} from '@angular/core';\r\nimport {Router, ROUTER_DIRECTIVES} from '@angular/router';\r\nimport {UserService} from '../../services/user.service';\r\nimport {Cookie} from 'ng2-cookies/ng2-cookies';\r\nimport * as moment from 'moment';\r\n\r\n@Component({\r\n    selector: 'login',\r\n    templateUrl: 'app/components/login/login.component.html',\r\n    styleUrls: ['app/components/login/login.component.css'],\r\n    directives: [ROUTER_DIRECTIVES]\r\n})\r\nexport class LoginComponent {\r\n    private email: string;\r\n    private password: string;\r\n    private error: string;\r\n    private year = moment().format(\"YYYY\");\r\n    private rememberActive: boolean = false;\r\n\r\n    public saving: boolean = false;\r\n\r\n    constructor(private router: Router, private userService: UserService) {\r\n        if (Cookie.get(\"RememberMe\") != null) {\r\n            this.saving = true;\r\n            var loginString = Cookie.get(\"RememberMe\").split(\":\");\r\n            this.userService.loginWithCookie(loginString[0], loginString[1]).subscribe(\r\n                response => {\r\n                    this.saving = false;\r\n                    this.router.navigate(['/']);\r\n                },\r\n                error => {\r\n                    this.saving = false;\r\n                    Cookie.delete('RememberMe');\r\n                    this.error = 'Nesprávne údaje na automatické prihlásenie';\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    onSubmit() {\r\n        this.saving = true;\r\n        this.userService.login(this.email, this.password, this.rememberActive).subscribe(\r\n            response => {\r\n                this.saving = false;\r\n                this.router.navigate(['/']);\r\n            },\r\n            error => {\r\n                this.saving = false;\r\n                this.error = 'Nesprávny email/heslo';\r\n            }\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}