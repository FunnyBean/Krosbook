{"version":3,"sources":["app/components/admin/cars/detail/detail.car.admin.component.ts"],"names":[],"mappings":"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","file":"app/components/admin/cars/detail/detail.car.admin.component.js","sourcesContent":["import {Component, Input, Output, EventEmitter} from '@angular/core';\r\nimport {Car} from '../../../../models/car.model';\r\nimport {CarService} from '../../../../services/car.service';\r\nimport {PlateUniquenessValidator, PlateValidator} from '../../../../validators/plate.validator';\r\n\r\n@Component({\r\n  selector: \"car\",\r\n  templateUrl: 'app/components/admin/cars/detail/detail.car.admin.component.html',\r\n  styleUrls: ['lib/css/modalWindow.css'],\r\n  directives: [PlateUniquenessValidator, PlateValidator]\r\n})\r\n\r\nexport class DetailCarAdminComponent {\r\n  public error;\r\n  public success;\r\n  public saving:boolean = false;\r\n  public formReset:boolean = true;\r\n  public carData:Car = new Car();\r\n\r\n  @Input() carId:number;\r\n  @Output() windowClose = new EventEmitter<boolean>();\r\n  @Output() updateList = new EventEmitter<boolean>();\r\n\r\n  constructor(private carService:CarService) { }\r\n\r\n  ngOnInit() {\r\n    if(this.carId)\r\n      this.getData();\r\n  }\r\n\r\n  getData(){\r\n    this.carService.getCar(this.carId).subscribe(\r\n      data => {this.carData = data.json()},\r\n      error => console.error(error)\r\n    );\r\n  }\r\n\r\n  newCar(){\r\n    this.saving = true;\r\n    let plate = this.carData.plate.toUpperCase();\r\n    let name = this.carData.name;\r\n    let color = this.carData.color;\r\n    this.carService.addCar(JSON.stringify({plate, name, color})).subscribe(\r\n      data => {\r\n      },\r\n      error => {\r\n        this.error = error;\r\n        this.saving = false;\r\n      },\r\n      () => {\r\n        this.saving = false;\r\n        this.success = 'Vozidlo úspešne vytvorené.';\r\n        this.carData = new Car();\r\n        this.formReset = false;\r\n        setTimeout(() => this.formReset = true, 0);\r\n        this.updateList.emit(true);\r\n      }\r\n    );\r\n  }\r\n\r\n  editCar(){\r\n    this.saving = true;\r\n    let id = this.carData.id\r\n    let plate = this.carData.plate.toUpperCase();\r\n    let name = this.carData.name;\r\n    let color = this.carData.color;\r\n    this.carService.editCar(id, JSON.stringify({id, name, plate, color})).subscribe(\r\n      data => {\r\n      },\r\n      error => {\r\n        this.error = error;\r\n        this.saving = false;\r\n      },\r\n      () => {\r\n        this.saving = false;\r\n        this.success = 'Vozidlo úspešne upravené.';\r\n        this.updateList.emit(true);\r\n      }\r\n    );\r\n  }\r\n\r\n  closeWindow(){\r\n    this.windowClose.emit(false);\r\n  }\r\n}\r\n\r\n"],"sourceRoot":"/source/"}