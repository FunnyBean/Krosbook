{"version":3,"sources":["app/components/admin/offices/detail/detail.office.admin.component.ts"],"names":[],"mappings":"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","file":"app/components/admin/offices/detail/detail.office.admin.component.js","sourcesContent":["import {Component, Input, Output, EventEmitter, OnInit} from '@angular/core';\r\nimport {Office} from '../../../../models/office.admin.model';\r\nimport {Equipment} from '../../../../models/equipment.admin.model';\r\nimport {OfficeService} from '../../../../services/office.service';\r\nimport {EquipmentComponent} from './equipment/equipment.component';\r\nimport {OfficeNameValidator} from '../../../../validators/officeName.validator';\r\n\r\n\r\n@Component({\r\n  selector: \"office\",\r\n  templateUrl: 'app/components/admin/offices/detail/detail.office.admin.component.html',\r\n  styleUrls: ['lib/css/modalWindow.css'],\r\n  directives: [EquipmentComponent, OfficeNameValidator]\r\n})\r\n\r\nexport class DetailOfficeAdminComponent implements OnInit{\r\n  public error:string;\r\n  public success:string;\r\n  public saving:boolean = false;\r\n  public equipment:Equipment;\r\n  public formReset:boolean = true;\r\n  public officeData:Office = new Office();\r\n\r\n  @Input() officeId:number;\r\n  @Output() windowClose = new EventEmitter<boolean>();\r\n  @Output() updateList = new EventEmitter<boolean>();\r\n\r\n  constructor(private officeService:OfficeService) { }\r\n\r\n  ngOnInit() {\r\n    if(this.officeId)\r\n      this.getData();\r\n    else this.equipment = JSON.parse('[]');\r\n  }\r\n\r\n  getData(){\r\n    this.officeService.getOffice(this.officeId).subscribe(\r\n      data => {this.officeData = data.json(), this.equipment = data.json().equipment},\r\n      error => console.error(error)\r\n    );\r\n  }\r\n\r\n  newOffice(){\r\n    this.saving = true;\r\n    let name = this.officeData.name;\r\n    let type = this.officeData.type;\r\n    let description = this.officeData.description;\r\n    let color = this.officeData.color;\r\n    let equipment = this.equipment;\r\n    this.officeService.addOffice(JSON.stringify({name, type, description, color, equipment})).subscribe(\r\n      data => {\r\n      },\r\n        error => {\r\n          this.error = error;\r\n          this.saving = false;\r\n        },\r\n        () => {\r\n          this.saving = false;\r\n          this.success = 'Miestnosť úspešne vytvorená.';\r\n          this.officeData = new Office();\r\n          this.formReset = false;\r\n          setTimeout(() => this.formReset = true, 0);\r\n          this.updateList.emit(true);\r\n          //this.closeWindow();\r\n        }\r\n    );\r\n  }\r\n\r\n  editOffice(){\r\n    this.saving = true;\r\n    let id = this.officeData.id;\r\n    let name = this.officeData.name;\r\n    let type = this.officeData.type;\r\n    let description = this.officeData.description;\r\n    let color = this.officeData.color;\r\n    let equipment = this.equipment;\r\n    this.officeService.editOffice(id, JSON.stringify({id, name, type, description, color, equipment})).subscribe(\r\n      data => {\r\n      },\r\n      error => {\r\n        this.error = error;\r\n        this.saving = false;\r\n      },\r\n      () => {\r\n        this.saving = false;\r\n        this.success = 'Miestnosť úspešne upravená.';\r\n        this.updateList.emit(true);\r\n      }\r\n    );\r\n  }\r\n\r\n  closeWindow(){\r\n    this.windowClose.emit(true);\r\n  }\r\n}\r\n"],"sourceRoot":"/source/"}